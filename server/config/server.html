<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>服务器控制</title>
</head>
<body>
<div>
    <h3><span id="projectName"></span>服务器列表</h3>
    <div id="servers"></div>
</div>
<div>
    <button style="height:200px; width:400px;" onclick=setTime()>设置当天时间</button>
    <label for="time"><input type="text" id="time"/></label>
</div>
</body>
<style>
    body {
        background-color: aliceblue
    }

    p {
        margin-left: 20px
    }

    .serverItem {
        border-radius: 6px;
        min-height: 20px;
        min-width: 220px;
        padding: 5px;
        margin-bottom: 20px;
        background-color: #f5f5f5;
        border: 1px solid #e3e3e3;
        -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .05);
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, .05);
        float: left;
    }
</style>

<script type="text/javascript">
    function ajaxGet(url, params, callback) {
        let request = new XMLHttpRequest();
        request.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                if (callback != null) {
                    callback(request.responseText)
                }
            }
        };
        if (params != null) {
            url += "?";
            for (let key = 0; key < params.length; key++) {
                if (!url.endsWith("?") && !url.endsWith("&")) {
                    url += "&";
                }
                url += key + "=" + params[key];
            }
        }
        request.open("GET", window.location + "/" + url, false);
        request.send();
    }

    function refreshServers() {
        ajaxGet("list", null, function (response) {
            let list = JSON.parse(response)
            let branches = list.branches;
            let serverItem = "";
            document.getElementById("projectName").innerHTML = list.project;
            for (let k of branches) {
                serverItem += '<label class="serverItem"><input type="checkbox" value="' + k + '" />' + "<b>" + k + "</b>" + "</label>"
            }
            console.log(serverItem)
            document.getElementById("servers").innerHTML = serverItem
        })
    }

    function setTime() {

    }

    refreshServers();
</script>
</html>